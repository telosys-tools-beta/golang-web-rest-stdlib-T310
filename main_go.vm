// Created on $today.date ( Time $today.time )
// Generated by $generator.name ( version $generator.version )
#set( $env.language = 'GO' )
package main

import (
	"log"
	"net/http"
	
	"internal/web/rest"
)

const webDir  = "www"
const webPort = ":80"

func serveStaticFile(w http.ResponseWriter, r *http.Request) {		
	s := webDir + r.URL.Path
	log.Print("Static file requested. URL path '" + r.URL.Path + "' --> server file '" + s + "'" )
	http.ServeFile(w, r, s)
}

func main() {
	
	log.Print("Starting server ... ")

	log.Print("Setting static file handler... ")
	// Set handler to serve static files
	http.HandleFunc("/", serveStaticFile)			

	log.Print("Init application REST controllers... ")
	rest.InitRestControllers()

	// Launch the http server
	log.Print("Launching http server (port=" + webPort + ") ... ")
	log.Fatal(http.ListenAndServe(webPort, nil))

}